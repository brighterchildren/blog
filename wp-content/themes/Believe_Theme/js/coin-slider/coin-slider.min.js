/**
 * Coin Slider - Unique jQuery Image Slider
 * @version: 1.0 - (2010/04/04)
 * @requires jQuery v1.2.2 or later 
 * @author Ivan Lazarevic
 * Examples and documentation at: http://workshop.rs/projects/coin-slider/
 
 * Licensed under MIT licence:
 *   http://www.opensource.org/licenses/mit-license.php
**/

function EnhancedArray(c){var b=0;var d=c;this.next=function(){b++;if(b>(d.length-1)){b=0}return d[b]};this.previous=function(){b--;if(b>0){b=(d.length-1)}return d[b]};this.current=function(){return d[b]}}(function(g){var f=new Array;var c=new Array;var o=new Array;var q=new Array;var d=new Array;var l=new Array;var b=new Array;var h=new Array;var p=new Array;var a=new Array;var n=new Array;var m=new Array;var e;g.fn.coinslider=g.fn.CoinSlider=function(r){init=function(s){c[s.id]=new Array();o[s.id]=new Array();q[s.id]=new Array();d[s.id]=new Array();l[s.id]=new Array();h[s.id]=0;a[s.id]=0;n[s.id]=1;m=["green","orange","blue","yellow","black"];e=new EnhancedArray(m);f[s.id]=g.extend({},g.fn.coinslider.defaults,r);g.each(g("#"+s.id+" img"),function(t,u){o[s.id][t]=g(u).attr("src");q[s.id][t]=g(u).parent().is("a")?g(u).parent().attr("href"):"";d[s.id][t]=g(u).parent().is("a")?g(u).parent().attr("target"):"";l[s.id][t]=g(u).next().is("span")?g(u).next().html():"";g(u).hide();g(u).next().hide()});g(s).css({"background-image":"url("+o[s.id][0]+")",width:f[s.id].width,height:f[s.id].height,position:"relative","background-position":"top left"}).wrap("<div class='coin-slider' id='coin-slider-"+s.id+"' />");g("#"+s.id).append("<div class='cs-title' id='cs-title-"+s.id+"' style='position: absolute; bottom:0; left: 0; z-index: 1000;'></div>");g.setFields(s);if(f[s.id].navigation){g.setNavigation(s)}g.transition(s,0);g.transitionCall(s);g("#cs-title-"+s.id).html(l[s.id][h[s.id]]);g("#cs-title-"+s.id).css("left",30)};g.setFields=function(s){tWidth=sWidth=parseInt(f[s.id].width/f[s.id].spw);tHeight=sHeight=parseInt(f[s.id].height/f[s.id].sph);counter=sLeft=sTop=0;tgapx=gapx=f[s.id].width-f[s.id].spw*sWidth;tgapy=gapy=f[s.id].height-f[s.id].sph*sHeight;for(i=1;i<=f[s.id].sph;i++){gapx=tgapx;if(gapy>0){gapy--;sHeight=tHeight+1}else{sHeight=tHeight}for(j=1;j<=f[s.id].spw;j++){if(gapx>0){gapx--;sWidth=tWidth+1}else{sWidth=tWidth}c[s.id][counter]=i+""+j;counter++;if(f[s.id].links){g("#"+s.id).append("<a href='"+q[s.id][0]+"' class='cs-"+s.id+"' id='cs-"+s.id+i+j+"' style='width:"+sWidth+"px; height:"+sHeight+"px; float: left; position: absolute;'></a>")}else{g("#"+s.id).append("<div class='cs-"+s.id+"' id='cs-"+s.id+i+j+"' style='width:"+sWidth+"px; height:"+sHeight+"px; float: left; position: absolute;'></div>")}g("#cs-"+s.id+i+j).css({"background-position":-sLeft+"px "+(-sTop+"px"),left:sLeft,top:sTop});sLeft+=sWidth}sTop+=sHeight;sLeft=0}g(".cs-"+s.id).mouseover(function(){g("#cs-navigation-"+s.id).show()});g(".cs-"+s.id).mouseout(function(){g("#cs-navigation-"+s.id).hide()});g("#cs-title-"+s.id).mouseover(function(){g("#cs-navigation-"+s.id).show()});g("#cs-title-"+s.id).mouseout(function(){g("#cs-navigation-"+s.id).hide()});if(f[s.id].hoverPause){g(".cs-"+s.id).mouseover(function(){f[s.id].pause=true});g(".cs-"+s.id).mouseout(function(){f[s.id].pause=false});g("#cs-title-"+s.id).mouseover(function(){f[s.id].pause=true});g("#cs-title-"+s.id).mouseout(function(){f[s.id].pause=false})}};g.transitionCall=function(s){clearInterval(b[s.id]);delay=f[s.id].delay+f[s.id].spw*f[s.id].sph*f[s.id].sDelay;b[s.id]=setInterval(function(){g.transition(s)},delay)};g.transition=function(v,w){if(f[v.id].pause==true){return}g.effect(v);a[v.id]=0;p[v.id]=setInterval(function(){g.appereance(v,c[v.id][a[v.id]])},f[v.id].sDelay);g(v).css({"background-image":"url("+o[v.id][h[v.id]]+")"});if(typeof(w)=="undefined"){h[v.id]++}else{if(w=="prev"){h[v.id]--}else{h[v.id]=w}}if(h[v.id]==o[v.id].length){h[v.id]=0}if(h[v.id]==-1){h[v.id]=o[v.id].length-1}g(".cs-button-"+v.id).removeClass("cs-active");g("#cs-button-"+v.id+"-"+(h[v.id]+1)).addClass("cs-active");if(l[v.id][h[v.id]]){var t;t=g(".slideshow-inner").outerWidth();g("#cs-title-"+v.id+" h1").animate({left:-t},f[v.id].titleSpeed,"easeInQuart");g("#cs-title-"+v.id+" p").delay(300).animate({left:-t},f[v.id].titleSpeed,"easeInQuart",function(){g("#cs-title-"+v.id).animate({left:-t},10,function(){g("#cs-title-"+v.id).html(l[v.id][h[v.id]]);g("#cs-title-"+v.id).removeClass();g("#cs-title-"+v.id).addClass("cs-title "+e.next());g("#cs-title-"+v.id+" h1").css("left",-t);g("#cs-title-"+v.id+" p").css("left",-t);g("#cs-title-"+v.id).animate({left:30},f[v.id].titleSpeed,function(){g("#cs-title-"+v.id+" p").animate({left:0},f[v.id].titleSpeed,"easeOutQuart");g("#cs-title-"+v.id+" h1").delay(300).animate({left:0},f[v.id].titleSpeed,"easeOutQuart")})})})}else{g("#cs-title-"+v.id).animate({left:-g("#cs-title-"+v.id).outerWidth()})}var u=g(".progress-bar"),s=u.clone(true);u.before(s);g("."+u.attr("class")+":last").remove()};g.appereance=function(t,s){g(".cs-"+t.id).attr("href",q[t.id][h[t.id]]).attr("target",d[t.id][h[t.id]]);if(a[t.id]==f[t.id].spw*f[t.id].sph){clearInterval(p[t.id]);return}g("#cs-"+t.id+s).css({opacity:0,"background-image":"url("+o[t.id][h[t.id]]+")"});g("#cs-"+t.id+s).animate({opacity:1},300);a[t.id]++};g.setNavigation=function(s){g(s).append("<div id='cs-navigation-"+s.id+"'></div>");g("#cs-navigation-"+s.id).hide();g("#cs-navigation-"+s.id).append("<a href='#' id='cs-prev-"+s.id+"' class='cs-prev'>&nbsp;</a>");g("#cs-navigation-"+s.id).append("<a href='#' id='cs-next-"+s.id+"' class='cs-next'>&nbsp;</a>");g("#cs-prev-"+s.id).css({position:"absolute",top:f[s.id].height/2-15,left:0,"z-index":1001,"line-height":"30px",opacity:f[s.id].opacity}).click(function(t){t.preventDefault();g.transition(s,"prev");g.transitionCall(s)}).mouseover(function(){g("#cs-navigation-"+s.id).show()});g("#cs-next-"+s.id).css({position:"absolute",top:f[s.id].height/2-15,right:0,"z-index":1001,"line-height":"30px",opacity:f[s.id].opacity}).click(function(t){t.preventDefault();g.transition(s);g.transitionCall(s)}).mouseover(function(){g("#cs-navigation-"+s.id).show()});g("<div id='cs-buttons-"+s.id+"' class='cs-buttons'></div>").appendTo(g("#coin-slider-"+s.id));for(k=1;k<o[s.id].length+1;k++){g("#cs-buttons-"+s.id).append("<a href='#' class='cs-button-"+s.id+"' id='cs-button-"+s.id+"-"+k+"'>"+k+"</a>")}g.each(g(".cs-button-"+s.id),function(t,u){g(u).click(function(v){g(".cs-button-"+s.id).removeClass("cs-active");g(this).addClass("cs-active");v.preventDefault();g.transition(s,t);g.transitionCall(s)})});g("#cs-navigation-"+s.id+" a").mouseout(function(){g("#cs-navigation-"+s.id).hide();f[s.id].pause=false});g("#cs-buttons-"+s.id).css({left:"50%","margin-left":-o[s.id].length*15/2-5,position:"relative"})};g.effect=function(s){effA=["random","swirl","rain","straight"];if(f[s.id].effect==""){eff=effA[Math.floor(Math.random()*(effA.length))]}else{eff=f[s.id].effect}c[s.id]=new Array();if(eff=="random"){counter=0;for(i=1;i<=f[s.id].sph;i++){for(j=1;j<=f[s.id].spw;j++){c[s.id][counter]=i+""+j;counter++}}g.random(c[s.id])}if(eff=="rain"){g.rain(s)}if(eff=="swirl"){g.swirl(s)}if(eff=="straight"){g.straight(s)}n[s.id]*=-1;if(n[s.id]>0){c[s.id].reverse()}};g.random=function(s){var u=s.length;if(u==0){return false}while(--u){var t=Math.floor(Math.random()*(u+1));var w=s[u];var v=s[t];s[u]=v;s[t]=w}};g.swirl=function(s){var u=f[s.id].sph;var v=f[s.id].spw;var C=1;var B=1;var t=0;var w=0;var A=0;var z=true;while(z){w=(t==0||t==2)?v:u;for(i=1;i<=w;i++){c[s.id][A]=C+""+B;A++;if(i!=w){switch(t){case 0:B++;break;case 1:C++;break;case 2:B--;break;case 3:C--;break}}}t=(t+1)%4;switch(t){case 0:v--;B++;break;case 1:u--;C++;break;case 2:v--;B--;break;case 3:u--;C--;break}check=g.max(u,v)-g.min(u,v);if(v<=check&&u<=check){z=false}}};g.rain=function(u){var x=f[u.id].sph;var s=f[u.id].spw;var w=0;var v=to2=from=1;var t=true;while(t){for(i=from;i<=v;i++){c[u.id][w]=i+""+parseInt(to2-i+1);w++}to2++;if(v<x&&to2<s&&x<s){v++}if(v<x&&x>=s){v++}if(to2>s){from++}if(from>v){t=false}}};g.straight=function(s){counter=0;for(i=1;i<=f[s.id].sph;i++){for(j=1;j<=f[s.id].spw;j++){c[s.id][counter]=i+""+j;counter++}}};g.min=function(t,s){if(t>s){return s}else{return t}};g.max=function(t,s){if(t<s){return s}else{return t}};this.each(function(){init(this)})};g.fn.coinslider.defaults={width:565,height:290,spw:7,sph:5,delay:3000,sDelay:30,opacity:0.7,titleSpeed:800,effect:"",navigation:true,links:true,hoverPause:true}})(jQuery);